generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum AssetType {
  STOCK
  ETF
  FUND
}

enum DistributionType {
  ACC
  DIST
}

model Asset {
  id           Int              @id @default(autoincrement())
  isin         String?          @unique
  type         AssetType
  distribution DistributionType?
  listings     AssetListing[]
}

model AssetListing {
  id          Int    @id @default(autoincrement())
  assetId     Int
  exchange    String
  ticker      String
  yahooSymbol String

  asset       Asset  @relation(fields: [assetId], references: [id], onDelete: Cascade)

  @@unique([assetId, exchange, ticker], name: "asset_exchange_ticker_unique")
}

